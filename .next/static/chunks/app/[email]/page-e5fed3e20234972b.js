(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>o});var a=t(5155);t(2115);var s=t(9708),l=t(2085),i=t(9434);let n=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:r,variant:t,size:l,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(n({variant:t,size:l,className:r})),...c})}},1118:(e,r,t)=>{"use strict";t.d(r,{default:()=>p});var a=t(5155),s=t(2115),l=t(5695),i=t(9434);function n(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}var o=t(285);let c=(0,t(2085).F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(c({variant:t}),r),...s})}function g(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...t})}function u(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:(0,i.cn)("bg-accent animate-pulse rounded-md",r),...t})}let m="temp-mail-storage",x={saveEmail:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,t=Date.now()+60*r*1e3;try{let r=x.getAllEmails();r.push({address:e,expiresAt:t}),localStorage.setItem(m,JSON.stringify(r))}catch(e){console.error("Error saving email:",e)}},getAllEmails:()=>{try{let e=[];{let r=localStorage.getItem(m);r&&(e=JSON.parse(r))}if(!Array.isArray(e))return[];let r=e.filter(e=>e&&"object"==typeof e&&"address"in e&&"expiresAt"in e&&Date.now()<=e.expiresAt);return r.length!==e.length&&localStorage.setItem(m,JSON.stringify(r)),r}catch(e){return console.error("Error getting emails:",e),[]}},removeEmail:e=>{try{let r=x.getAllEmails().filter(r=>r.address!==e);localStorage.setItem(m,JSON.stringify(r))}catch(e){console.error("Error removing email:",e)}},getExpirationTime:e=>{try{let r=x.getAllEmails().find(r=>r.address===e);if(!r)return null;return Math.max(0,Math.floor((r.expiresAt-Date.now())/1e3))}catch(e){return console.error("Error getting expiration time:",e),null}}};var h=t(6766);function p(e){let{emailAddress:r}=e,[t,i]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),[p,v]=(0,s.useState)(""),[f,b]=(0,s.useState)(null),[y,N]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),k=(0,l.useRouter)();(0,s.useEffect)(()=>{if(!r)return void k.push("/");x.saveEmail(r,30);let e=()=>{let e=x.getExpirationTime(r);return null===e?(k.push("/"),!1):(b(e),!0)};if(e()){E();let r=setInterval(()=>{e()?E(!0):clearInterval(r)},1e4);return()=>clearInterval(r)}},[r,k]);let E=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||m(!0),N(!0);try{let e=await fetch("/api/emails?email=".concat(encodeURIComponent(r))),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to fetch emails");if(Array.isArray(t.emails))i(t.emails),v("");else throw console.error("Invalid response:",t),Error("Invalid response format")}catch(e){console.error("Error fetching emails:",e),v(e.message||"Failed to fetch emails"),0===t.length&&i([])}finally{m(!1),N(!1)}},S=async e=>{try{await navigator.clipboard.writeText(e),w(!0),setTimeout(()=>w(!1),2e3)}catch(e){console.error("Failed to copy text: ",e),v("Failed to copy email address")}};return(0,a.jsx)("main",{className:"min-h-screen p-4 md:p-8 bg-gradient-to-br from-gray-900 to-gray-800",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)(n,{className:"p-6 bg-gray-800/50 backdrop-blur border-gray-700 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 w-full md:w-auto",children:[(0,a.jsxs)("h1",{className:"text-xl md:text-2xl font-bold text-white flex items-center gap-2",children:[(0,a.jsx)(h.default,{src:"/file.svg",alt:"Email",width:24,height:24,className:"opacity-80"}),(0,a.jsx)("span",{className:"truncate",children:r})]}),null!==f&&(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Expires in: ",(e=>{let r=Math.floor(e/60);return"".concat(r,"m ").concat(e%60,"s")})(f)]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 w-full md:w-auto justify-end",children:[(0,a.jsx)(o.$,{onClick:()=>S(r),className:"transition-all duration-200 ".concat(j?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"),disabled:j,children:j?"Copied!":"Copy Email"}),(0,a.jsx)(o.$,{onClick:()=>E(),className:"bg-blue-600 hover:bg-blue-700 transition-all duration-200",disabled:y,children:y?"Refreshing...":"Refresh"}),(0,a.jsx)(o.$,{onClick:()=>k.push("/"),variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700 transition-all duration-200",children:"Back to Home"})]})]})}),p&&(0,a.jsx)(d,{variant:"destructive",className:"bg-red-900/50 border-red-800 text-red-200",children:(0,a.jsx)(g,{children:p})}),(0,a.jsx)("div",{className:"space-y-4",children:c?Array.from({length:3}).map((e,r)=>(0,a.jsx)(n,{className:"p-6 bg-gray-800/50 backdrop-blur border-gray-700",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(u,{className:"h-4 w-[200px] bg-gray-700"}),(0,a.jsx)(u,{className:"h-4 w-[100px] bg-gray-700"})]}),(0,a.jsx)(u,{className:"h-6 w-[300px] bg-gray-700"})]}),(0,a.jsx)(u,{className:"h-20 w-full bg-gray-700"})]})},r)):t.length>0?t.map((e,r)=>(0,a.jsx)(n,{className:"p-6 bg-gray-800/50 backdrop-blur border-gray-700 hover:border-gray-600 transition-all duration-200 hover:shadow-lg",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-gray-300 font-semibold truncate",children:e.from}),(0,a.jsx)("span",{className:"text-gray-400 text-sm md:text-base",children:e.date})]}),(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:e.subject||"(No subject)"})]}),e.html?(0,a.jsx)("div",{className:"prose prose-invert max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:e.html}}):(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans text-gray-300 text-sm md:text-base max-h-48 overflow-y-auto p-2 bg-gray-700 rounded-md border border-gray-600",children:e.body||"(No content)"})]})},r)):!p&&(0,a.jsx)(n,{className:"p-8 bg-gray-800/50 backdrop-blur border-gray-700",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(h.default,{src:"/window.svg",alt:"No Emails",width:80,height:80,className:"mx-auto opacity-60 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-gray-300 font-medium",children:"No emails found"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"New emails will appear here automatically"})]})]})})})]})})}},2183:(e,r,t)=>{Promise.resolve().then(t.bind(t,1118))},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var a=t(2596),s=t(9688);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[514,766,441,684,358],()=>r(2183)),_N_E=e.O()}]);